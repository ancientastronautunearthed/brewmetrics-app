<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrewMetrics Dashboard - Pouring Insights</title>
    <!-- Link to your main stylesheet -->
    <link rel="stylesheet" href="/assets/css/styles.css">
    <!-- Add Google Fonts if not already in styles.css -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bitter:wght@400;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="dashboard-page"> <!-- Add class for page-specific body styles -->

    <header class="dashboard-header">
        <div class="container header-container">
            <div class="logo-container">
                <!-- Replace with your actual logo -->
                <img src="/assets/images/brewmetrics-logo-placeholder.svg" alt="BrewMetrics Logo" class="logo">
                <span>BrewMetrics</span>
            </div>
            <div class="user-controls">
                <span id="user-email" class="user-info">Loading...</span>
                <!-- NOTE: app.js needs to add .btn-content span -->
                <button id="logout-btn" class="btn btn-secondary logout-btn">
                    <span class="btn-content">Log Out</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Auth Status (Initially shown, hidden by JS) -->
    <div id="auth-status" class="loading-indicator container">Checking authentication...</div>
    <!-- Global Error Message Area -->
    <div id="error-message" class="error-message container" style="display:none;"></div>

    <!-- Main Dashboard Content (Initially hidden, shown by JS) -->
    <main id="dashboard-content" class="container" style="display:none;">

        <!-- === Section for Public URL and QR Code === -->
        <section id="brewery-public-url" class="dashboard-section url-qr-section">
            <!-- Content dynamically generated by updateBreweryPublicUrl in app.js -->
            <!-- JS needs to ensure generated buttons have .btn-content spans -->
            <h3>Your Public Link & QR Code</h3>
            <p>Share this link or QR code for customers to give feedback on active batches:</p>
            <div class="url-container form-group">
                 <label for="public-url-input">Public Link:</label>
                 <div class="input-group">
                    <input type="text" id="public-url-input" value="Loading..." readonly>
                    <button id="copy-url-btn" class="btn btn-secondary copy-btn" type="button">
                        <span class="btn-content">Copy</span>
                    </button>
                 </div>
                 <div id="copy-success" class="copy-success-msg" style="display: none;">Link copied!</div>
            </div>
            <div class="qr-controls form-group">
                 <label>QR Code:</label>
                 <!-- JS needs to add .btn-content span -->
                 <button id="generate-qr-btn" class="btn btn-primary" type="button" disabled>
                     <span class="btn-content"><span class="icon icon-qr"></span>Show QR Code</span>
                 </button>
                 <!-- JS needs to add .btn-content span -->
                 <button id="hide-qr-btn" class="btn btn-secondary" type="button" style="display: none;">
                     <span class="btn-content">Hide QR Code</span>
                 </button>
            </div>
            <div id="qr-code-display" class="qr-code-display" style="display: none;">
                <!-- QR Code will be generated here -->
            </div>
        </section>
        <!-- === End Public URL Section === -->

        <!-- === Enhanced Batch Creation Form === -->
        <section id="batch-form-section" class="dashboard-section batch-form-section">
            <h2>Create New Batch</h2>
            <form id="batch-form">
                <div class="form-row"> <!-- Optional row for better layout -->
                    <div class="form-group">
                        <label for="batch-name">Batch Name:</label>
                        <input type="text" id="batch-name" name="batch-name" placeholder="e.g., Hazy Does It IPA" required>
                    </div>
                    <div class="form-group">
                        <label for="batch-style">Style:</label>
                        <input type="text" id="batch-style" name="batch-style" placeholder="e.g., NEIPA">
                    </div>
                </div>
                 <div class="form-row">
                    <div class="form-group">
                        <label for="batch-abv">ABV (%):</label>
                        <input type="number" id="batch-abv" name="batch-abv" placeholder="6.8" step="0.1" min="0">
                    </div>
                    <div class="form-group">
                        <label for="batch-ibu">IBU:</label>
                        <input type="number" id="batch-ibu" name="batch-ibu" placeholder="55" min="0">
                    </div>
                </div>
                <div class="form-group">
                    <label for="batch-description">Internal Description:</label>
                    <textarea id="batch-description" name="batch-description" rows="2" placeholder="Notes for your eyes only..."></textarea>
                </div>
                <div class="form-group">
                    <label for="batch-brewers-notes">Brewer's Notes (Public):</label>
                    <textarea id="batch-brewers-notes" name="batch-brewers-notes" rows="3" placeholder="Tasting notes for the feedback form..."></textarea>
                </div>
                <div class="form-group">
                    <label for="batch-incentive-text">Post-Feedback Incentive:</label>
                    <textarea id="batch-incentive-text" name="batch-incentive-text" rows="2" placeholder="e.g., Show this screen for $1 off!"></textarea>
                </div>
                 <!-- JS needs to add .btn-content span if not already there -->
                <button type="submit" id="create-batch-btn" class="btn btn-primary">
                    <span class="btn-content"><span class="icon icon-brew"></span>Create Batch</span>
                </button>
            </form>
        </section>
        <!-- === End Batch Creation Form === -->

        <!-- === Batch Listing Section === -->
        <section id="batch-list-section" class="dashboard-section batch-list-section">
            <h2>Your Batches</h2>
            <div id="batches-list">
                <p class="loading-indicator">Loading your glorious brews...</p>
                <!-- Batch items will be dynamically inserted here by app.js -->
                <!-- Example structure app.js needs to create inside #batches-list:
                <article class="batch-item batch-active" data-batch-id="XYZ">
                    <div class="batch-item-header">
                        <h3><span class="icon batch-icon icon-beer-mug"></span> Batch Name</h3>
                        <span class="batch-status">Active</span>
                    </div>
                    <div class="batch-info">
                        <p class="batch-meta">...</p>
                        <p class="batch-description">...</p>
                        <p class="batch-url">...</p>
                    </div>
                    <div class="button-group">
                        <button class="btn toggle-active-btn" data-batch-id="XYZ" data-current-state="true">
                            <span class="btn-content">Deactivate</span>
                        </button>
                        <button class="btn view-feedback-btn" data-batch-id="XYZ">
                             <span class="btn-content">View Feedback</span>
                        </button>
                    </div>
                    <div class="feedback-details" id="feedback-XYZ" style="display: none;">...</div>
                </article>
                 -->
            </div>
        </section>
        <!-- === End Batch Listing Section === -->

    </main> <!-- End #dashboard-content -->

    <footer class="dashboard-footer">
        <div class="container">
            <p>BrewMetrics - Stop Guessing. Start Knowing.</p>
        </div>
    </footer>

    <!-- === SCRIPT LOADING AREA === -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script type="module" src="/assets/js/firebase-config.js"></script>
    <!-- Auth needs to load before app potentially -->
    <script type="module" src="/assets/js/auth.js"></script>
    <!-- App logic last -->
    <script type="module" src="/assets/js/app.js"></script>

</body>
</html>